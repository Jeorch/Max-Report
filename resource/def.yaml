storages:
- name: BmMarketdimensionStorage
  method: NewMarketdimensionStorage
  daemons:
  - BmMongodbDaemon
- name: BmProductdimensionStorage
  method: NewProductdimensionStorage
  daemons:
  - BmMongodbDaemon
- name: BmMarketStorage
  method: NewMarketStorage
  daemons:
  - BmMongodbDaemon

resources:
- name: BmMarketdimensionResource
  method: NewMarketdimensionResource
  storages:
  - BmMarketdimensionStorage
- name: BmProductdimensionResource
  method: NewProductdimensionResource
  storages:
  - BmProductdimensionStorage
- name: BmMarketResource
  method: NewMarketResource
  storages:
  - BmMarketStorage

models:
- Marketdimension
- Productdimension
- Market

services:
- name: bm-marketdimension
  model: BmMarketdimension
  resource: BmMarketdimensionResource
- name: bm-productdimension
  model: BmProductdimension
  resource: BmProductdimensionResource
- name: bm-market
  model: BmMarket
  resource: BmMarketResource

functions:
# - name: BmUserAgentHandler
#   create: NewUserAgentHandler
#   daemons:
#   - BmMongodbDaemon
#   method: GenerateUserAgent
#   http: GET
#   args:
#   - name
# - name: BmGenerateAccessTokenHandler
#   create: NewBmGenerateAccessTokenHandler
#   daemons:
#   - BmMongodbDaemon
#   method: GenerateAccessToken
#   http: GET
#   args:
#   - name
# - name: BmRefreshAccessTokenHandler
#   create: NewRefreshAccessTokenHandler
#   daemons:
#   - BmMongodbDaemon
#   method: RefreshAccessToken
#   http: GET
#   args:
#   - name

middlewares:
 - name: BmCheckTokenMiddleware
   create: NewCheckTokenMiddleware
   daemons:
   - BmRedisDaemon
   args:
#   - 192.168.100.174:9096
   - oauth.pharbers.com

panic:
  name: BmCommonPanicHandle
  create: NewCommonPanicHandle

daemons:
- name: BmMongodbDaemon
  method: NewMongoDBDaemon
  args:
    host: primary
#    host: 192.168.100.174
    port: 27017
    database: pharbers-max-repository
- name: BmRedisDaemon
  method: NewRedisDBDaemon
  args:
    host: redis
#    host: 192.168.100.174
    port: 6379
    password:
    database: 0